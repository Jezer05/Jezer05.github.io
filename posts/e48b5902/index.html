<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>数据库系统概论复习 | Jezer's Blogs</title><meta name="keywords" content="DB,期末复习"><meta name="author" content="Jezer,jezer05@qq.com"><meta name="copyright" content="Jezer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="完成进度  时间线                               完成过程2022-06-26优化绪论部分内容增加绪论例题模块增加评论区扩展功能关系数据库理论提供百度网盘习题以及增加推理规则内容修改部分tip新增时间线版块和完成进度新增习题修改错误：关系数据库中关系操作的特点：数据操作是集合操作，操作对象和操作结果都是集合（之前写了关系）修改错误：绪论中两级映像和数据独立性括号内逻辑"><meta property="og:type" content="article"><meta property="og:title" content="数据库系统概论复习"><meta property="og:url" content="https://jezer.top/posts/e48b5902/index.html"><meta property="og:site_name" content="Jezer&#39;s Blogs"><meta property="og:description" content="完成进度  时间线                               完成过程2022-06-26优化绪论部分内容增加绪论例题模块增加评论区扩展功能关系数据库理论提供百度网盘习题以及增加推理规则内容修改部分tip新增时间线版块和完成进度新增习题修改错误：关系数据库中关系操作的特点：数据操作是集合操作，操作对象和操作结果都是集合（之前写了关系）修改错误：绪论中两级映像和数据独立性括号内逻辑"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pic.imgdb.cn/item/62bbd5fd1d64b07066f568af.jpg"><meta property="article:published_time" content="2022-06-24T04:51:07.000Z"><meta property="article:modified_time" content="2022-08-02T11:30:59.377Z"><meta property="article:author" content="Jezer"><meta property="article:tag" content="DB"><meta property="article:tag" content="期末复习"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pic.imgdb.cn/item/62bbd5fd1d64b07066f568af.jpg"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/62a09fb009475431296de262.jpg"><link rel="canonical" href="https://jezer.top/posts/e48b5902/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:{limitDay:100,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:800},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: Jezer",link:"链接: ",source:"来源: Jezer's Blogs",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"数据库系统概论复习",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-08-02 19:30:59"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/62a09fb109475431296de403.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home1"></use></svg> <span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shijianzhou"></use></svg> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg> <span>分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-life"></use></svg> <span>生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fanju"></use></svg> <span>番剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/games/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxi"></use></svg> <span>游戏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle1"></use></svg> <span>音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/gallery/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhaopian"></use></svg> <span>图库</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-dianying1"></use></svg> <span>电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/books/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shudan"></use></svg> <span>书单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youlian"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyu"></use></svg> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://pic.imgdb.cn/item/62bbd5fd1d64b07066f568af.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jezer's Blogs</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home1"></use></svg> <span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shijianzhou"></use></svg> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg> <span>分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-life"></use></svg> <span>生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fanju"></use></svg> <span>番剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/games/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxi"></use></svg> <span>游戏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle1"></use></svg> <span>音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/gallery/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhaopian"></use></svg> <span>图库</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-dianying1"></use></svg> <span>电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/books/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shudan"></use></svg> <span>书单</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youlian"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyu"></use></svg> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库系统概论复习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-24T04:51:07.000Z" title="发表于 2022-06-24 12:51:07">2022-06-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-02T11:30:59.377Z" title="更新于 2022-08-02 19:30:59">2022-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/">复习整理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="数据库系统概论复习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/e48b5902/#post-comment"><span class="waline-comment-count" data-path="/posts/e48b5902/"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue" style="width:100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>完成进度</p></div></div><details class="folding-tag" cyan open><summary>时间线</summary><div class="content"><div class="timeline blue"><div class="timeline-item headline"><div class="timeline-item-title"><div class="item-circle"><p>完成过程</p></div></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><p>2022-06-26</p></div></div><div class="timeline-item-content"><ol><li>优化绪论部分内容</li><li>增加绪论例题模块</li><li>增加评论区扩展功能</li><li>关系数据库理论提供百度网盘习题以及增加推理规则内容</li><li>修改部分tip</li><li>新增时间线版块和完成进度</li><li>新增习题</li><li>修改错误：关系数据库中关系操作的特点：数据操作是集合操作，操作对象和操作结果都是集合（之前写了关系）</li><li>修改错误：绪论中两级映像和数据独立性括号内逻辑独立性与物理独立性写反了，现已修正</li></ol></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><p>2022-06-25</p></div></div><div class="timeline-item-content"><ol><li>数据库恢复技术章节内容</li><li>并发控制与封锁</li><li>考试题型</li><li>新增tip</li><li>优化页面布局和字体</li></ol></div></div><div class="timeline-item"><div class="timeline-item-title"><div class="item-circle"><p>2022-06-24</p></div></div><div class="timeline-item-content"><ol><li>绪论</li><li>关系数据库</li><li>SQL与T-SQL</li><li>数据库安全性</li><li>数据库完整性</li><li>关系数据理论</li><li>数据库设计概述</li></ol></div></div></div></div></details><h2 id="考试题型">考试题型</h2><div class="tip warning"><p>单选题可以参考我们平时做的练习。SQL语句部分可以直接看SQL与T-SQL的部分，也可以看老师平时布置的实验题，我这里的也是摘自习题并进行了挑选，并附上自己的答案。T-SQL建议稍微过一下PPT，老师说不会刻意考，在触发器和存储过程中需要使用，会声明变量等基本操作即可。如果文章中存在问题，还请指出。绪论部分内容有例题，摘自百度文库，供大家参考。祝考试顺利！！！</p></div><details class="folding-tag" cyan><summary>题型与分值</summary><div class="content"><ol><li>单选（30）</li><li>简答（30）</li><li>SQL语句填空（20）</li><li>写SQL语句（20）</li></ol></div></details><h2 id="绪论">绪论</h2><div class="tip warning"><p>新增了E-R图的概念和表示方法，考试中可能会让你画图或者解释这些概念（个人猜测，我在百度文库中看到类似题目）</p></div><div class="note blue no-icon flat"><ol><li><p>数据库定义</p><details class="folding-tag" cyan><summary>answer P4</summary><div class="content"><ol><li>数据库（Database，简称DB）是长期储存在计算机内、有组织的、可共享的大量数据的集合。</li><li>数据库中的数据按一定的数据模型组织、描述和储存，具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享。</li><li>具有永久存储、有组织和可共享三个基本特点。</li></ol></div></details></li><li><p>数据库管理系统</p><details class="folding-tag" cyan><summary>answer P5</summary><div class="content"><ol><li>数据库管理系统位于用户与操作系统之间的一层数据管理软件</li><li>是基础软件，是一个大型复杂的软件系统</li><li>科学地组织和存储数据、高效地获取和维护数据</li><li>主要功能：数据库定义功能；数据库的操纵功能；数据库保护功能；数据库维护功能；数据字典</li><li>数据库保护（控制）功能：数据安全性控制；数据完整性控制；并发控制；恢复功能</li></ol><p><img src="https://pic.imgdb.cn/item/62b559d509475431295580f3.png" alt=""></p></div></details></li><li><p>数据库的特点</p><details class="folding-tag" cyan><summary>answer P11</summary><div class="content"><ol><li>数据结构化</li><li>数据的共享性高，冗余度低且易扩充</li><li>数据独立性高<ol><li>物理独立性</li><li>逻辑独立性</li></ol></li><li>数据由数据库管理系统统一管理和控制<ol><li>数据安全性控制</li><li>数据完整性控制</li><li>并发控制</li><li>恢复功能</li></ol></li></ol><p><img src="https://pic.imgdb.cn/item/62b559f6094754312955bf6c.png" alt=""></p></div></details></li><li><p>概念模型</p><details class="folding-tag" cyan><summary>answer P17</summary><div class="content"><ol><li>实体：客观存在并可相互区别的事物</li><li>属性：实体所具有的某一特性</li><li>码：唯一标识实体的属性集</li><li>实体型：用实体名及其属性名集合来抽象和刻画同类实体</li><li>实体集：同一类型实体的集合</li><li>域：一组具有相同数据类型的值的集合</li></ol><p><img src="https://pic.imgdb.cn/item/62b55959094754312954b124.png" alt=""></p></div></details></li><li><p>E-R模型三要素、联系的种类</p><details class="folding-tag" cyan><summary>answer P216</summary><div class="content"><ol><li>E-R模型三要素<ol><li>实体</li><li>属性</li><li>实体间的联系</li></ol></li><li>联系<ol><li>实体内部联系：各属性间联系</li><li>实体外部联系：不同实体集之间的联系</li></ol></li><li>实体间的联系<ol><li>一对一1:1</li><li>一对多1:n</li><li>多对多n:m</li><li>三实体型之间</li><li>单实体型内一对多的联系</li></ol></li><li>E-R图：提供了表示实体型、属性和联系的方法<ul><li>实体型：用矩形表示，矩形框内写明实体名。</li><li>属性：用椭圆形表示，并用无向边将其与相应的实体连接起来。</li><li>联系：用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体连接起来，同时在无向边旁标上联系的类型。</li></ul></li></ol><p><img src="https://pic.imgdb.cn/item/62b554c109475431294a85c4.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b554df09475431294af96b.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b55977094754312954dd2e.png" alt=""></p></div></details></li><li><p>数据模型三要素</p><details class="folding-tag" cyan><summary>answer P18</summary><div class="content"><ol><li>数据结构：描述数据库的组成对象，以及对象之间的联系</li><li>数据操作：对数据库中各种对象（型）的实例（值）允许执行的操作的集合，包括操作及有关的操作规则</li><li>数据的完整性约束条件：一组完整性规则的集合</li></ol><p><img src="https://pic.imgdb.cn/item/62b55a410947543129564af8.png" alt=""></p></div></details></li><li><p>数据库系统三模式结构</p><details class="folding-tag" cyan><summary>answer P28</summary><div class="content"><ol><li>外模式：也称子模式或用户模式，是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。外模式是保证数据库安全性的一个有力措施，每个用户只能看见和访问所对应的外模式中的数据</li><li>模式：也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图，一个数据库只有一个模式，是数据库的中心与关键，独立于数据库的其他层次，设计数据库模式结构时应首先确定数据库的逻辑模式</li><li>内模式：也称存储模式，是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式，一个数据库只有一个内模式</li></ol><p><img src="https://pic.imgdb.cn/item/62b5550c09475431294ba48c.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b55ac60947543129570f64.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b55aee09475431295758ce.png" alt=""></p></div></details><details class="folding-tag" cyan><summary>例题</summary><div class="content"><ol><li>试述数据库系统三级模式结构，这种结构的优点是什么。<br>数据库系统的三级模式结构是指数据库系统是由外模式、模式和内模式三级构成。数据库系统的三级模式是对数据的三个抽象级别，它把数据的具体组织留给DBMS管理，使用户能逻辑地抽象地处理数据，而不必关心数据在计算机中的具体表示方式与存储方式。为了能够在内部实现这三个抽象层次的联系和转换，数据库管理系统在这三级模式之间提供了两层映象：外模式／模式映象；模式／内模式映象。正是这两层映象保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。</li></ol></div></details></li><li><p>两级映像和数据独立性</p><details class="folding-tag" cyan><summary>answer P30</summary><div class="content"><ol><li>外模式／模式映像（逻辑独立性）<br>当模式改变时，数据库管理员对外模式／模式映象作相应改变，使外模式保持不变，应用程序是依据数据的外模式编写的，应用程序不必修改。保证了数据与程序的逻辑独立性，简称数据的逻辑独立性</li><li>模式／内模式映像（物理独立性）<br>当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式／内模式映象，使模式保持不变，应用程序不受影响。保证了数据与程序的物理独立性，简称数据的物理独立性。</li><li>数据与程序的独立性概念：<br>特定的应用程序是在外模式描述的数据结构上编制的，它依赖于特定的外模式，与数据库的模式和存储结构独立。数据库的二级映像保证了数据库外模式的稳定性，从底层保证了应用程序的稳定性，除非应用需求本身发生变化，否则应用程序一般不需要修改</li><li>数据与程序之间的独立性，使得数据的定义和描述可以从应用程序中分离出去。数据的存取由数据库管理系统管理，简化了应用程序的编制，大大减少了应用程序的维护和修改<br><img src="https://pic.imgdb.cn/item/62b55b06094754312957852d.png" alt=""></li></ol></div></details></li><li><p>数据库系统的组成</p><details class="folding-tag" cyan><summary>answer P31</summary><div class="content"><ol><li>硬件平台及数据库<ol><li>足够大的内存</li><li>足够的大的磁盘或磁盘阵列等设备</li><li>较高的通道能力，提高数据传送率</li></ol></li><li>软件<ol><li>数据库管理系统</li><li>支持数据库管理系统运行的操作系统</li><li>与数据库接口的高级语言及其编译系统</li><li>以数据库管理系统为核心的应用开发工具</li><li>为特定应用环境开发的数据库应用系统</li></ol></li><li>人员<ol><li>数据库管理人员</li><li>系统分析员和数据库设计人员</li><li>应用程序员</li><li>最终用户</li></ol></li></ol><p><img src="https://pic.imgdb.cn/item/62b55bf0094754312958f9ca.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b55bc6094754312958b960.png" alt=""></p></div></details><details class="folding-tag" cyan><summary>例题</summary><div class="content"><ol><li>试述数据库系统的组成<br>数据库系统一般由数据库、数据库管理系统(及其开发工具)、应用系统、数据库管理员和用户构成</li><li>DBA的职责是什么<br>决定数据库中的信息内容和结构、决定数据库的存储结构和存取策略、定义数据的安全性要求和完整性约束条件、监控数据库的使用和运行、数据库的改进和重组重构。</li></ol></div></details></li></ol></div><h2 id="关系数据库">关系数据库</h2><div class="note orange no-icon flat"><ol><li><p>候选码、主属性等概念（理解掌握）</p><details class="folding-tag" cyan><summary>answer P40</summary><div class="content"><ol><li>码<ol><li>候选码：若关系中的某一属性组的值能唯一地标识一个元组，则称该属性组为候选码</li><li>全码：关系模式的所有属性组是这个关系模式的候选码，称为全码</li><li>主码：若一个关系有多个候选码，则选定其中一个为主码</li></ol></li><li>属性<ol><li>主属性：候选码的诸属性称为主属性</li><li>非主属性：不包含在任何侯选码中的属性称为非主属性</li></ol></li></ol></div></details></li><li><p>关系的六条性质（理解掌握）</p><details class="folding-tag" cyan><summary>answer P41</summary><div class="content"><ol><li>同质的列</li><li>不同列可出自同一个域，但要求不同的属性名</li><li>属性无序</li><li>元组候选码不重复</li><li>元组无序</li><li>分量是原子</li></ol></div></details></li><li><p>关系操作的特点</p><details class="folding-tag" cyan><summary>answer P44</summary><div class="content"><p>数据操作是集合操作，操作对象和操作结果都是集合</p></div></details></li><li><p>关系三类完整性</p><details class="folding-tag" cyan><summary>answer P45</summary><div class="content"><ol><li>实体完整性</li><li>参照完整性</li><li>用户定义的完整性</li></ol><p><img src="https://pic.imgdb.cn/item/62b55fcc09475431295ee860.png" alt=""></p></div></details></li><li><p>关系代数（选择题）</p><details class="folding-tag" cyan><summary>answer P49</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b5602809475431295f6bac.png" alt=""></p><ol><li><p>预备知识</p><details class="folding-tag" cyan><summary>预备知识</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b561660947543129612982.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b5617d0947543129614a63.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b5618b0947543129615cb5.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b561980947543129617038.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b5620a0947543129621d57.png" alt=""></p></div></details></li><li><p>集合运算符</p><details class="folding-tag" cyan><summary>集合运算符</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b5608f0947543129600885.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b560a90947543129602bc2.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b560b60947543129603bf4.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b560c60947543129605493.png" alt=""></p></div></details></li><li><p>专门关系运算符</p><details class="folding-tag" cyan><summary>选择、投影</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b562b0094754312963351d.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b562c30947543129635692.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b562d90947543129638cd1.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b562eb094754312963b61b.png" alt=""></p></div></details><details class="folding-tag" cyan><summary>连接</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b563b60947543129653e85.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b563c2094754312965511b.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b563de0947543129658cd9.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b563f2094754312965b146.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b563cf0947543129656c4f.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b56412094754312965e783.png" alt=""></p></div></details></li></ol></div></details></li></ol></div><h2 id="SQL与T-SQL">SQL与T-SQL</h2><div class="note red no-icon flat"><ol><li><p>基本表操作</p><details class="folding-tag" cyan><summary>answer P82</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">USE sct;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在学院表中，学院号为主键</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> coll</span><br><span class="line">(</span><br><span class="line"> collnum <span class="type">nchar</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> collname nvarchar(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> tnum <span class="type">nchar</span>(<span class="number">8</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在专业表中，专业号为主键，所在学院为外键</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> d</span><br><span class="line">(</span><br><span class="line"> dnum <span class="type">nchar</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> dname nvarchar(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> collnum <span class="type">nchar</span>(<span class="number">8</span>),</span><br><span class="line"> <span class="keyword">FOREIGN</span> KEY(collnum) <span class="keyword">REFERENCES</span> coll(collnum)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在学生表中，学号为主键，专业号为外键，性别为‘男’或’女’</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> s</span><br><span class="line">(</span><br><span class="line"> snum <span class="type">nchar</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> sname nvarchar(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> ssex <span class="type">nchar</span>(<span class="number">1</span>) <span class="keyword">CHECK</span> (ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">or</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>),</span><br><span class="line"> sbirth <span class="type">date</span>,</span><br><span class="line"> spolity nvarchar(<span class="number">30</span>),</span><br><span class="line"> snation nvarchar(<span class="number">30</span>),</span><br><span class="line"> sorigin nvarchar(<span class="number">30</span>),</span><br><span class="line"> enterdata <span class="type">date</span>,</span><br><span class="line"> sphone nvarchar(<span class="number">30</span>),</span><br><span class="line"> dnum <span class="type">nchar</span>(<span class="number">8</span>),</span><br><span class="line"> <span class="keyword">FOREIGN</span> KEY(dnum) <span class="keyword">REFERENCES</span> d(dnum)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在课程表中课程号为主键，学分带1位小数</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> c</span><br><span class="line">(</span><br><span class="line"> cnum <span class="type">nchar</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> cname nvarchar(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> credit <span class="type">numeric</span>(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在选修表中，学号+课号为主键，学号和课号分别为外键,分数在[0,100]之间</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> sc</span><br><span class="line">(</span><br><span class="line"> snum <span class="type">nchar</span>(<span class="number">8</span>),</span><br><span class="line"> tnum <span class="type">nchar</span>(<span class="number">8</span>),</span><br><span class="line"> score <span class="type">int</span> <span class="keyword">CHECK</span> (score <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>),</span><br><span class="line"> <span class="keyword">PRIMARY</span> KEY(snum, tnum),</span><br><span class="line"> <span class="keyword">FOREIGN</span> KEY(snum) <span class="keyword">REFERENCES</span> s(snum),</span><br><span class="line"> <span class="keyword">FOREIGN</span> KEY(tnum) <span class="keyword">REFERENCES</span> t(tnum)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在已经存在的学生表中增加一个邮件地址“Semail”的新属性列，允许为空；</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">add</span> semail nvarchar(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改教师表中tsalary的数据类型为money；</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> tsalary money;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把学生表中的电话属性删掉；</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">column</span> sphone;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除学生性别是男或女的约束条件;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">constraint</span> CK__s__ssex__571DF1D5;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加学生性别是男或女的约束条件。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> CK__s__ssex__571DF1D5 <span class="keyword">CHECK</span>(ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">or</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>);</span><br></pre></td></tr></table></figure></div></details></li><li><p>数据查询</p><details class="folding-tag" cyan><summary>answer P89</summary><div class="content"><ol><li><p>简单查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学院编号为‘22’的教师姓名和工资情况，工资增加1000后输出。</span></span><br><span class="line"><span class="keyword">SELECT</span> tname, tsalary <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">as</span> tsalary</span><br><span class="line"><span class="keyword">FROM</span> t</span><br><span class="line"><span class="keyword">WHERE</span> collnum <span class="operator">=</span> <span class="string">&#x27;22&#x27;</span></span><br><span class="line"><span class="comment">-- 查询全体学生的系编号、学号、姓名、性别和年龄，</span></span><br><span class="line"><span class="comment">-- 查询结果按所在系的系编号升序排列，同一系中的学生按年龄降序排列。</span></span><br><span class="line"><span class="keyword">SELECT</span> dnum, snum, sname, ssex, <span class="keyword">YEAR</span>(GETDATE()) <span class="operator">-</span> <span class="keyword">YEAR</span>(sbirth) <span class="keyword">as</span> sage</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> dnum, sage <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从学生表中查出名字第2个字是</span></span><br><span class="line"><span class="comment">-- ’睿’   或  ‘晓’  或 ‘子’ 或’涵’ 的学生资料。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> sname <span class="keyword">LIKE</span> <span class="string">&#x27;_[睿,晓,子,涵]%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询所有电话号码是空的学生信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> sphone <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出职称是副教授或工程师或教授的教师信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t</span><br><span class="line"><span class="keyword">WHERE</span> ttitle <span class="keyword">IN</span> (<span class="string">&#x27;副教授&#x27;</span>, <span class="string">&#x27;工程师&#x27;</span>, <span class="string">&#x27;教授&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>聚合分组</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计选修了课程的学生人数。</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> snum)</span><br><span class="line"><span class="keyword">from</span> sc;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按职称统计所有男教师的最高、最低和平均工资工资</span></span><br><span class="line"><span class="comment">-- 筛选出平均工资高于7000的记录，并按平均工资降序排列。</span></span><br><span class="line"><span class="keyword">select</span> ttitle,<span class="built_in">max</span>(tsalary) ,<span class="built_in">min</span>(tsalary),<span class="built_in">avg</span>(tsalary)</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">where</span> tsex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ttitle</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(tsalary)<span class="operator">&gt;=</span><span class="number">7000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(tsalary) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按平均工资从高到低的顺序分别列出男、女教师各种职称（非空）的</span></span><br><span class="line"><span class="comment">-- 人数（任职人数多于100）和平均工资。</span></span><br><span class="line"><span class="keyword">select</span> ttitle,tsex,<span class="built_in">avg</span>(tsalary),<span class="built_in">count</span>(tnum)</span><br><span class="line"><span class="keyword">from</span> t</span><br><span class="line"><span class="keyword">where</span> ttitle <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> ttitle <span class="operator">&lt;&gt;</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ttitle, tsex</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(tnum)<span class="operator">&gt;</span><span class="number">100</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(tsalary) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询有50门以上课程是90分以上的学生姓名、学号、课程数，</span></span><br><span class="line"><span class="comment">-- 查询结果按课程数从多到少的顺序排列。</span></span><br><span class="line"><span class="keyword">select</span> s.sname,sc.snum,<span class="built_in">count</span>(cnum)</span><br><span class="line"><span class="keyword">from</span> sc,s</span><br><span class="line"><span class="keyword">where</span> s.snum<span class="operator">=</span>sc.snum <span class="keyword">and</span> score<span class="operator">&gt;=</span><span class="number">90</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sname,sc.snum</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(cnum)<span class="operator">&gt;</span><span class="number">50</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">count</span>(cnum) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按职称统计信息工程学院平均工资高于6000的各种职称的人数和平均工资，</span></span><br><span class="line"><span class="comment">-- 查询结果按平均工资从大到小顺序排列。</span></span><br><span class="line"><span class="keyword">select</span> ttitle,<span class="built_in">avg</span>(tsalary),<span class="built_in">count</span>(t.tnum)</span><br><span class="line"><span class="keyword">from</span> t, coll</span><br><span class="line"><span class="keyword">where</span> t.collnum <span class="operator">=</span> coll.collnum <span class="keyword">and</span> collname <span class="operator">=</span> <span class="string">&#x27;信息工程学院&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> ttitle</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(tsalary)<span class="operator">&gt;=</span><span class="number">6000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(tsalary) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询‘计算机科学与技术’专业选修课程的最低成绩大于等于90分的学生的姓名。</span></span><br><span class="line"><span class="keyword">select</span> sname,<span class="built_in">min</span>(score)</span><br><span class="line"><span class="keyword">from</span> d,s,sc</span><br><span class="line"><span class="keyword">where</span> d.dnum<span class="operator">=</span>s.dnum <span class="keyword">and</span> s.snum<span class="operator">=</span>sc.snum  <span class="keyword">and</span> dname <span class="operator">=</span>  <span class="string">&#x27;计算机科学与技术&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sname,s.snum</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">min</span>(score)<span class="operator">&gt;=</span><span class="number">90</span>;</span><br></pre></td></tr></table></figure></li><li><p>连接查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有学生的学号、姓名、选修的课程号和成绩。</span></span><br><span class="line"><span class="keyword">select</span> s.snum,sname,sc.cnum,sc.score</span><br><span class="line"><span class="keyword">from</span> s,sc</span><br><span class="line"><span class="keyword">where</span> s.snum<span class="operator">=</span>sc.snum;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有学生的姓名、选修的课程名和相应的学分。</span></span><br><span class="line"><span class="keyword">select</span> sname,c.cname,c.credit</span><br><span class="line"><span class="keyword">from</span> s,sc,c</span><br><span class="line"><span class="keyword">where</span> s.snum<span class="operator">=</span>sc.snum <span class="keyword">and</span> sc.cnum<span class="operator">=</span>c.cnum;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询选修了数据库原理与技术并且成绩在90分以上的学生的姓名。</span></span><br><span class="line"><span class="keyword">select</span> s.sname</span><br><span class="line"><span class="keyword">from</span> sc,c,s</span><br><span class="line"><span class="keyword">where</span> s.snum<span class="operator">=</span>sc.snum <span class="keyword">and</span> sc.score<span class="operator">&gt;</span><span class="number">90</span> <span class="keyword">and</span> sc.cnum<span class="operator">=</span>c.cnum <span class="keyword">and</span> c.cname<span class="operator">=</span><span class="string">&#x27;数据库原理与技术&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询计算机科学与技术专业选修了数据库原理与技术</span></span><br><span class="line"><span class="comment">-- 并且成绩在90分以上的学生的姓名。</span></span><br><span class="line"><span class="keyword">select</span> s.sname</span><br><span class="line"><span class="keyword">from</span> sc,c,s,d</span><br><span class="line"><span class="keyword">where</span> s.snum<span class="operator">=</span>sc.snum <span class="keyword">and</span> sc.score<span class="operator">&gt;</span><span class="number">90</span> <span class="keyword">and</span> sc.cnum<span class="operator">=</span>c.cnum <span class="keyword">and</span> c.cname<span class="operator">=</span><span class="string">&#x27;数据库原理与技术&#x27;</span></span><br><span class="line">    <span class="keyword">and</span> s.dnum<span class="operator">=</span>d.dnum <span class="keyword">and</span> d.dname<span class="operator">=</span><span class="string">&#x27;计算机科学与技术专业&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资高于杨平的所有教师的姓名、职称和工资。</span></span><br><span class="line"><span class="keyword">select</span> t1.tname,t1.ttitle,t1.tsalary</span><br><span class="line"><span class="keyword">from</span> t t1,t t2</span><br><span class="line"><span class="keyword">where</span> t1.tsalary<span class="operator">&gt;</span>t2.tsalary <span class="keyword">and</span> t2.tname<span class="operator">=</span><span class="string">&#x27;杨平&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询与“沈羿”在同一个专业学习的学生姓名和性别。</span></span><br><span class="line"><span class="keyword">select</span> s1.sname,s1.ssex</span><br><span class="line"><span class="keyword">from</span> s s1, s s2</span><br><span class="line"><span class="keyword">where</span> s1.dnum<span class="operator">=</span>s2.dnum <span class="keyword">and</span> s2.sname<span class="operator">=</span><span class="string">&#x27;沈羿&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>嵌套查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查询选修了‘B3503021 ’号课程的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> snum,sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>  snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> cnum<span class="operator">=</span><span class="string">&#x27;B3503021&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> snum,sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>  <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> sc.snum<span class="operator">=</span>s.snum <span class="keyword">and</span> cnum<span class="operator">=</span><span class="string">&#x27;B3503021&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询没有选修‘B3503021’号课程的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> snum,sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>  snum <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> cnum<span class="operator">=</span><span class="string">&#x27;B3503021&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> snum,sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>  <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> sc.snum<span class="operator">=</span>s.snum <span class="keyword">and</span> cnum<span class="operator">=</span><span class="string">&#x27;B3503021&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询选修了‘数据库原理与技术’的学生姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>  snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> cnum <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> cnum <span class="keyword">FROM</span>  c <span class="keyword">WHERE</span> cname<span class="operator">=</span><span class="string">&#x27;数据库原理与技术&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span>   <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc  <span class="keyword">WHERE</span> sc.snum<span class="operator">=</span>s.snum <span class="keyword">AND</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">                <span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> c  <span class="keyword">WHERE</span> c.cnum<span class="operator">=</span>sc.cnum <span class="keyword">and</span> cname<span class="operator">=</span><span class="string">&#x27;数据库原理与技术&#x27;</span> ));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资高于杨平的所有教师的姓名、职称和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> tname ,ttitle,tsalary</span><br><span class="line"><span class="keyword">FROM</span> t t1</span><br><span class="line"><span class="keyword">WHERE</span> tsalary<span class="operator">&gt;</span>(<span class="keyword">SELECT</span> tsalary  <span class="keyword">FROM</span> t t2 <span class="keyword">WHERE</span> t2.tname<span class="operator">=</span><span class="string">&#x27;杨平&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tname, ttitle,tsalary</span><br><span class="line"><span class="keyword">FROM</span> t t1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t t2  <span class="keyword">WHERE</span>  t1.tsalary<span class="operator">&gt;</span>t2.tsalary <span class="keyword">AND</span> t2.tname<span class="operator">=</span><span class="string">&#x27;杨平&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询比‘信息工程学院’最低工资高的其他学院教师信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t t1</span><br><span class="line"><span class="keyword">WHERE</span> tsalary<span class="operator">&gt;</span><span class="keyword">ANY</span>(<span class="keyword">SELECT</span> tsalary <span class="keyword">FROM</span> t t2 <span class="keyword">WHERE</span> t2.collnum <span class="keyword">IN</span>(</span><br><span class="line">                    <span class="keyword">SELECT</span> collnum <span class="keyword">from</span> coll <span class="keyword">WHERE</span> collname <span class="operator">=</span> <span class="string">&#x27;信息工程学院&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 找出每个学生超过他自己选修课程平均成绩的学号、课程号和成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> snum,cnum,score</span><br><span class="line"><span class="keyword">FROM</span> sc sc1</span><br><span class="line"><span class="keyword">WHERE</span> score<span class="operator">&gt;</span>(<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(score) <span class="keyword">FROM</span> sc sc2 <span class="keyword">WHERE</span> sc1.snum<span class="operator">=</span>sc2.snum );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出工资低于教师平均工资的教师的工号、姓名、职称和工资情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> tnum,tname ,ttitle,tsalary</span><br><span class="line"><span class="keyword">FROM</span> t t1</span><br><span class="line"><span class="keyword">WHERE</span> tsalary<span class="operator">&lt;</span>(<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(tsalary) <span class="keyword">FROM</span> t t2);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询与“沈羿”在同一个专业学习的学生姓名和性别。</span></span><br><span class="line"><span class="keyword">SELECT</span> sname ,ssex</span><br><span class="line"><span class="keyword">FROM</span> s s1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> s s2 <span class="keyword">WHERE</span>  s2.sname<span class="operator">=</span><span class="string">&#x27;沈羿&#x27;</span> <span class="keyword">AND</span> s1.dnum<span class="operator">=</span>s2.dnum);</span><br></pre></td></tr></table></figure></li><li><p>查询综合</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">USE sct;</span><br><span class="line"><span class="comment">-- 查询既选修了课程c01又选修了课程c02的学生的学号和姓名。</span></span><br><span class="line"><span class="comment">--（四种方法：集合、自身连接、相关和不相关子查询）</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s, sc</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> cnum <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span></span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s, sc</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s, sc sc1, sc sc2</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc1.snum <span class="keyword">AND</span> sc1.snum <span class="operator">=</span> sc2.snum <span class="keyword">AND</span> sc1.cnum <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span> <span class="keyword">AND</span> sc2.cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc sc1 <span class="keyword">WHERE</span> cnum <span class="operator">=</span><span class="string">&#x27;c01&#x27;</span> <span class="keyword">AND</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc sc2 <span class="keyword">WHERE</span> sc1.snum <span class="operator">=</span> sc2.snum <span class="keyword">AND</span> sc2.cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cnum <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span> <span class="keyword">AND</span> snum <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询选修了课程c01没有选修课程c02的学生的学号和姓名。</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s, sc</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> cnum <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span></span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s, sc</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> snum, sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cnum <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span> <span class="keyword">AND</span> snum <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cnum <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询学校中所有师生的姓名。</span></span><br><span class="line"><span class="keyword">SELECT</span> sname name</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> tname</span><br><span class="line"><span class="keyword">FROM</span> t;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询学校中所有与教师同名的学生姓名。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> sname <span class="keyword">IN</span> (<span class="keyword">SELECT</span> tname <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> sname <span class="operator">=</span> tname);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询同名同姓的学生姓名和重名数量</span></span><br><span class="line"><span class="comment">-- 要求输出姓名和重名数，按数量从多到少排列。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> s1.sname, <span class="built_in">COUNT</span>(s1.sname) count</span><br><span class="line"><span class="keyword">FROM</span> s s1, s s2</span><br><span class="line"><span class="keyword">WHERE</span> s1.sname <span class="operator">=</span> s2.sname</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.sname</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(s1.sname) <span class="operator">&gt;</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">COUNT</span>(s1.sname) <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure></li></ol></div></details></li><li><p>数据更新</p><details class="folding-tag" cyan><summary>answer P115</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.将新生（学号：202201010101；姓名：伍俊；性别：男；出生日期：2004-08-08；电话：88485561；系编号：0501）</span></span><br><span class="line"><span class="comment">--的记录插入学生表，并为其选：c01 、c02与c03三门课程。</span></span><br><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> s(snum, sname, ssex, sbirth, sphone, dnum)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;202201010101&#x27;</span>, <span class="string">&#x27;伍俊&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2004-08-08&#x27;</span>, <span class="string">&#x27;88485561&#x27;</span>, <span class="string">&#x27;0501&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> sc(snum, cnum)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;202201010101&#x27;</span>, <span class="string">&#x27;c01&#x27;</span>),  (<span class="string">&#x27;202201010101&#x27;</span>, <span class="string">&#x27;c02&#x27;</span>),  (<span class="string">&#x27;202201010101&#x27;</span>, <span class="string">&#x27;c03&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.建立课程号、课程名、平均成绩与选课人数表。并将数据存入到该表中。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> class</span><br><span class="line">(</span><br><span class="line"> cnum <span class="type">nchar</span>(<span class="number">12</span>),</span><br><span class="line"> cname nvarchar(<span class="number">50</span>),</span><br><span class="line"> avg_score <span class="type">numeric</span>(<span class="number">5</span>,<span class="number">1</span>),</span><br><span class="line"> stu_num <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">INTO</span> class(cnum, cname, avg_score, stu_num)</span><br><span class="line"><span class="keyword">SELECT</span> sc.cnum, c.cname, <span class="built_in">AVG</span>(sc.score), <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> sc, c</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sc.cnum, c.cnum, c.cname</span><br><span class="line"><span class="keyword">HAVING</span> sc.cnum <span class="operator">=</span> c.cnum;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.事后发现‘雷吉平’考试作弊，将其所有成绩改为0分。</span></span><br><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> score <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> s <span class="keyword">WHERE</span> sname <span class="operator">=</span> <span class="string">&#x27;雷吉平&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.将所有教师的工资增加1000元。</span></span><br><span class="line"><span class="keyword">UPDATE</span> t</span><br><span class="line"><span class="keyword">SET</span> tsalary <span class="operator">+</span><span class="operator">=</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.将‘计算机科学与技术’专业全体学生的成绩置零。</span></span><br><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> score <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> s <span class="keyword">WHERE</span> dnum <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> dnum <span class="keyword">FROM</span> d <span class="keyword">WHERE</span> dname <span class="operator">=</span> <span class="string">&#x27;计算机科学与技术&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.将杨平任命为‘信息工程学院’院长。</span></span><br><span class="line"><span class="keyword">UPDATE</span> coll</span><br><span class="line"><span class="keyword">set</span> tnum <span class="operator">=</span> (<span class="keyword">SELECT</span> tnum <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> tname <span class="operator">=</span> <span class="string">&#x27;杨平&#x27;</span>)</span><br><span class="line"><span class="keyword">WHERE</span> collname <span class="operator">=</span> <span class="string">&#x27;信息工程学院&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7.将‘信息工程学院’院长的工资降为该学院的平均工资。</span></span><br><span class="line"><span class="keyword">UPDATE</span> t</span><br><span class="line"><span class="keyword">set</span> tsalary <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(tsalary) <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> collnum <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> collnum <span class="keyword">FROM</span> coll <span class="keyword">WHERE</span> collname <span class="operator">=</span> <span class="string">&#x27;信息工程学院&#x27;</span>))</span><br><span class="line"><span class="keyword">WHERE</span> tnum <span class="operator">=</span> (<span class="keyword">SELECT</span> tnum <span class="keyword">FROM</span> coll <span class="keyword">WHERE</span> collname <span class="operator">=</span> <span class="string">&#x27;信息工程学院&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8.在学生表中增加flag标志列，如果该同学选课，则flag置1,如果未选课，则flag置0。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">add</span> flag tinyint;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> s</span><br><span class="line"><span class="keyword">set</span> flag <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> s</span><br><span class="line"><span class="keyword">set</span> flag <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9.学号为‘S030404’的学生由于退学，删除该学生记录及其选课记录。</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> sc</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="operator">=</span> <span class="string">&#x27;S030404&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="operator">=</span> <span class="string">&#x27;S030404&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10.删除低于平均工资的老师记录以及任课记录。</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> t</span><br><span class="line"><span class="keyword">WHERE</span> tsalary <span class="operator">&lt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(tsalary) <span class="keyword">FROM</span> t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> tc</span><br><span class="line"><span class="keyword">WHERE</span> tnum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> tnum <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> tsalary <span class="operator">&lt;</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(tsalary) <span class="keyword">FROM</span> t));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11.删除‘计算机科学与技术’专业全体学生的选课记录。</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> sc</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> s <span class="keyword">WHERE</span> dnum <span class="keyword">IN</span> (</span><br><span class="line">                <span class="keyword">SELECT</span> dnum <span class="keyword">FROM</span> d <span class="keyword">WHERE</span> dname <span class="operator">=</span> <span class="string">&#x27;计算机科学与技术&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 12.删除没有选课的学生信息。</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> snum <span class="keyword">FROM</span> sc);</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></details></li><li><p>视图</p><details class="folding-tag" cyan><summary>answer P121</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">USE sct;</span><br><span class="line"><span class="comment">--1.创建一个视图VIEW_S，显示成绩等于100分的学生的学号、姓名、课程名和成绩。</span></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_S&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_S</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_S</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname, cname, score</span><br><span class="line"><span class="keyword">FROM</span> s, sc, c</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> sc.cnum <span class="operator">=</span> c.cnum <span class="keyword">AND</span> score <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--2.建立‘计算机科学与技术’专业选修了‘数据库原理与技术’这门课程的学生视图VIEW_CS。（学号，姓名，成绩）</span></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_CS&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_CS</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_CS</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname, score</span><br><span class="line"><span class="keyword">FROM</span> s, sc, d, c</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> s.dnum <span class="operator">=</span> d.dnum <span class="keyword">AND</span> c.cnum <span class="operator">=</span> sc.cnum <span class="keyword">AND</span> d.dname <span class="operator">=</span> <span class="string">&#x27;计算机科学与技术&#x27;</span> <span class="keyword">AND</span> c.cname <span class="operator">=</span> <span class="string">&#x27;数据库原理与技术&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--3.建立‘计算机科学与技术’专业选修了‘数据库原理与技术’这门课程且成绩在90分以上的学生视图VIEW_CS90。（学号，姓名，成绩）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--要求创建基于视图的视图。</span></span><br><span class="line"></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_CS90&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_CS90</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_CS90</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> snum, sname, score</span><br><span class="line"><span class="keyword">FROM</span> VIEW_CS</span><br><span class="line"><span class="keyword">WHERE</span> score <span class="operator">&gt;</span> <span class="number">90</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--4.建立‘计算机科学与技术’专业的学生的学号，姓名和平均成绩的视图。</span></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_D&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_D</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_D</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname, <span class="built_in">AVG</span>(score) <span class="keyword">as</span> avg_score</span><br><span class="line"><span class="keyword">FROM</span> s, sc, d</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> s.dnum <span class="operator">=</span> d.dnum <span class="keyword">AND</span> dname <span class="operator">=</span> <span class="string">&#x27;计算机科学与技术&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.snum, sname</span><br><span class="line"></span><br><span class="line"><span class="comment">--5.将学院名称及该学院教师的平均工资定义为一个视图。</span></span><br><span class="line"></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_TS&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_TS</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_TS</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> collname, <span class="built_in">AVG</span>(tsalary) <span class="keyword">as</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> coll, t</span><br><span class="line"><span class="keyword">WHERE</span> t.collnum <span class="operator">=</span> coll.collnum</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> collname;</span><br><span class="line"></span><br><span class="line"><span class="comment">--6.建立一视图显示教师的工号，姓名和年龄。（可考虑用datediff()函数）</span></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_T&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_T</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> VIEW_T</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> tnum, tname, datediff(<span class="keyword">YEAR</span>, tbirth, GETDATE()) <span class="keyword">as</span> tage</span><br><span class="line"><span class="keyword">FROM</span> t</span><br><span class="line"></span><br><span class="line"><span class="comment">--7.删除视图VIEW_CS并观察VIEW_CS90是否可用，显示删除VIEW_CS90</span></span><br><span class="line">IF object_id(<span class="string">&#x27;VIEW_CS&#x27;</span>, <span class="string">&#x27;V&#x27;</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">VIEW</span>  VIEW_CS</span><br><span class="line">GO</span><br></pre></td></tr></table></figure></div></details></li><li><p>触发器</p><details class="folding-tag" cyan><summary>answer PPT</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在选课表SC上创建触发器，当向该表中插入记录时，若学生选课门数超过5门时,</span></span><br><span class="line"><span class="comment">-- 则向客户端发出警告信息，同时将插入记录自动删除。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_insc</span><br><span class="line"><span class="keyword">on</span> sc</span><br><span class="line">after <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">if(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> sc,inserted <span class="keyword">where</span> sc.snum<span class="operator">=</span>inserted.snum)<span class="operator">&gt;</span><span class="number">5</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">rollback</span></span><br><span class="line">    print<span class="string">&#x27;限选五门！&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    print<span class="string">&#x27;选课成功！&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在sc表上创建触发器，当删除学生的选课记录时，</span></span><br><span class="line"><span class="comment">-- 首先检查要删除的行数，如果是删除多行，则返回错误信息。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tr_del</span><br><span class="line"><span class="keyword">on</span> sc</span><br><span class="line">after <span class="keyword">delete</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">if(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> deleted)<span class="operator">&gt;</span><span class="number">1</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">rollback</span></span><br><span class="line">    print<span class="string">&#x27;不能删除多行&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    print<span class="string">&#x27;删除成功&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建一触发器tr_inc,在向C表插入或者修改课程记录时，</span></span><br><span class="line"><span class="comment">-- 先检查是否与该课程同名的课程已经存在，以避免课程的混淆。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tr_inc</span><br><span class="line"><span class="keyword">on</span> c</span><br><span class="line">after <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">if <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> c,inserted <span class="keyword">where</span> c.cname<span class="operator">=</span>inserted.cname)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">rollback</span></span><br><span class="line">    print<span class="string">&#x27;已存在该课程&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    print<span class="string">&#x27;修改成功&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建一触发器,在对学生的姓名进行更新时，显示更新前后的学生姓名。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tr_up</span><br><span class="line"><span class="keyword">on</span> s</span><br><span class="line">after <span class="keyword">update</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">if <span class="keyword">update</span>(sname)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> sname<span class="string">&#x27;更名前&#x27;</span><span class="keyword">from</span> deleted</span><br><span class="line">    <span class="keyword">select</span> sname<span class="string">&#x27;更名后&#x27;</span><span class="keyword">from</span> inserted</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></div></details></li><li><p>存储过程</p><details class="folding-tag" cyan><summary>answer PPT</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.创建一个加密存储过程，从学生选课数据库中查询学号,姓名,课程名和成绩。</span></span><br><span class="line"><span class="comment">-- 执行该存储过程，并用sp_helptext查看该存储过程代码。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_sc_select</span><br><span class="line"><span class="keyword">WITH</span> ENCRYPTION</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname, cname, score</span><br><span class="line"><span class="keyword">FROM</span> s, sc, c</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> sc.cnum <span class="operator">=</span> c.cnum</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> proc_sc_select;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line">SP_HELPTEXT proc_sc_select;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> proc_sc_select;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--  2.创建一存储过程，完成向课程表（C）中插入一条记录</span></span><br><span class="line"><span class="comment">-- 记录值通过输入参数传递到存储过程中，并执行该存储过程。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_c_insert(<span class="variable">@cnum</span> <span class="keyword">AS</span> <span class="type">nchar</span>(<span class="number">12</span>), <span class="variable">@cname</span> <span class="keyword">AS</span> nvarchar(<span class="number">50</span>), <span class="variable">@credit</span> <span class="keyword">AS</span> <span class="type">numeric</span>(<span class="number">5</span>, <span class="number">1</span>))</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> c</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="variable">@cnum</span>, <span class="variable">@cname</span>, <span class="variable">@credit</span>);</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> proc_c_insert <span class="string">&#x27;00001005&#x27;</span>, VUE3, <span class="number">12.0</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.创建一存储过程，在删除学生(s)表时,同时删除该学生的选课记录，</span></span><br><span class="line"><span class="comment">-- 输入参数为学号。并执行该存储过程。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_delete_s_sc(<span class="variable">@snum</span> <span class="keyword">AS</span> <span class="type">nchar</span>(<span class="number">14</span>))</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> sc</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="operator">=</span> <span class="variable">@snum</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> s</span><br><span class="line"><span class="keyword">WHERE</span> snum <span class="operator">=</span> <span class="variable">@snum</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> proc_delete_s_sc <span class="string">&#x27;10103060209&#x27;</span></span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.创建一存储过程proc2,显示其指定课程的成绩在指定范围内的学生学号、姓名、课程名和成绩，</span></span><br><span class="line"><span class="comment">-- 并执行该存储过程。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc2(<span class="variable">@cname</span> <span class="keyword">AS</span> nvarchar(<span class="number">50</span>), <span class="variable">@min</span> <span class="keyword">AS</span> tinyint, <span class="variable">@max</span> <span class="keyword">AS</span> tinyint)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, s.sname, cname, score</span><br><span class="line"><span class="keyword">FROM</span> s, sc, c</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> sc.cnum <span class="operator">=</span> c.cnum <span class="keyword">AND</span> score <span class="operator">&gt;=</span> <span class="variable">@min</span> <span class="keyword">AND</span> score <span class="operator">&lt;=</span> <span class="variable">@max</span> <span class="keyword">AND</span> c.cname <span class="operator">=</span> <span class="variable">@cname</span>;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> proc2 <span class="string">&#x27;中药学&#x27;</span>, <span class="number">40</span>, <span class="number">50</span></span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 创建一存储过程，显示某一同学的平均成绩，</span></span><br><span class="line"><span class="comment">-- 学号通过输入参数传递到存储过程中，并执行该存储过程。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_avg(<span class="variable">@snum</span> <span class="keyword">AS</span> <span class="type">nchar</span>(<span class="number">14</span>))</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.snum, sname, <span class="built_in">AVG</span>(score) <span class="keyword">AS</span> <span class="string">&#x27;avg_score&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> s, sc</span><br><span class="line"><span class="keyword">WHERE</span> s.snum <span class="operator">=</span> sc.snum <span class="keyword">AND</span> s.snum <span class="operator">=</span> <span class="variable">@snum</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sname, s.snum;</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXEC</span> proc_avg <span class="string">&#x27;10103060229&#x27;</span></span><br><span class="line">GO</span><br></pre></td></tr></table></figure></div></details></li></ol></div><h2 id="数据库安全性">数据库安全性</h2><div class="note green no-icon flat"><ol><li><p>数据库安全性控制</p><details class="folding-tag" cyan><summary>answer P137</summary><div class="content"><p>数据库安全性控制的常用方法：用户标识和鉴定；存取控制；视图；审计；数据加密</p></div></details></li><li><p>权限授予和收回</p><details class="folding-tag" cyan><summary>answer P141</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 把查询S表权限授给用户U1</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> S</span><br><span class="line"><span class="keyword">TO</span> U1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把C表的增、删、改权限授予用户U2和U3</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span>,<span class="keyword">DELETE</span>,<span class="keyword">UPDATE</span></span><br><span class="line"><span class="keyword">ON</span> C</span><br><span class="line"><span class="keyword">TO</span> U2,U3;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把对表SC的查询权限授予所有用户</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> SC</span><br><span class="line"><span class="keyword">TO</span> PUBLIC;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把查询Student表和修改学生学号的权限授给用户U4</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(Snum), <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> S</span><br><span class="line"><span class="keyword">TO</span> U4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把对表SC的INSERT权限授予U5用户，并允许他再将此权限授予其他用户</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> SC</span><br><span class="line"><span class="keyword">TO</span> U5</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 收回所有用户对表SC的查询权限</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> SC</span><br><span class="line"><span class="keyword">FROM</span> PUBLIC;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把用户U5对SC表的INSERT权限收回</span></span><br><span class="line"><span class="comment">-- 将用户U5的INSERT权限收回的时候应该使用CASCADE，否则拒绝执行该语句</span></span><br><span class="line"><span class="comment">-- 如果U6或U7还从其他用户处获得对SC表的INSERT权限，则他们仍具有此权限，</span></span><br><span class="line"><span class="comment">-- 系统只收回直接或间接从U5处获得的权限</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> SC</span><br><span class="line"><span class="keyword">FROM</span> U5 CASCADE ;</span><br></pre></td></tr></table></figure></div></details></li></ol></div><h2 id="数据库完整性">数据库完整性</h2><div class="note blue no-icon flat"><ol><li><p>数据库完整性定义</p><details class="folding-tag" cyan><summary>answer P157</summary><div class="content"><p>数据库完整性是指数据的正确性和相容性(P13 还有一个有效性)</p></div></details></li></ol></div><h2 id="关系数据理论">关系数据理论</h2><div class="tip warning"><p>建议直接看书本与PPT中的函数依赖、码、1NF、2NF、3NF、BCNF、P189图、Armstrong公理系统、推理规则、算法。这章内容会出现在简答题，要求会计算和判断。同时这里提供了对应的习题供大家练习，只需要看考试内容，做题步骤还建议参考老师的PPT<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1fjs7WsZIIBuPQNtXyzONoA">百度网盘</a>的下载地址<span class="hide-inline"><button type="button" class="hide-button" style="background-color:#ff7242;color:#fff">提取码<br></button><span class="hide-content">6hei</span></span></p></div><div class="note orange no-icon flat"><ol><li>候选码</li><li>属性集闭包</li><li>范式判断</li></ol><details class="folding-tag" cyan><summary>推理规则</summary><div class="content"><ol><li>自反律(reflexivity)： 若Y ⊆ X， 则X → Y</li><li>增广律(augmentation)： 若X → Y ，则XZ → YZ</li><li>传递律(transitivity)： 若X → Y，Y → Z，则X → Z</li><li>合并律(union rule)：若X → Y，X → Z，则X → YZ</li><li>分解律(decomposition rule)： 若X → YZ ，则X → Y，X → Z</li><li>伪传递律(pseudotransitivity rule)：若X → Y，WY → Z，则WX → Z</li></ol></div></details></div><h2 id="数据库设计概述">数据库设计概述</h2><div class="note red no-icon flat"><ol><li>数据库设计六大阶段<details class="folding-tag" cyan><summary>answer P209</summary><div class="content"><ol><li>需求分析阶段</li><li>概念结构设计阶段</li><li>逻辑结构设计阶段</li><li>物理结构设计阶段</li><li>数据库实施阶段</li><li>数据库运行和维护阶段</li></ol></div></details></li></ol></div><h2 id="数据库恢复技术">数据库恢复技术</h2><div class="tip warning"><p>注意理解把握P303图10.4中每个阶段系统所做的事情，看懂原理非常重要，考试中很可能出现类似的图然后进行分析</p></div><div class="note green no-icon flat"><ol><li><p>事务定义</p><details class="folding-tag" cyan><summary>answer P293</summary><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure></div></details></li><li><p>事务四大特性</p><details class="folding-tag" cyan><summary>answer P293</summary><div class="content"><p>ACID原则：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持续性（Durability）</p></div></details></li><li><p>故障的种类</p><details class="folding-tag" cyan><summary>answer P295</summary><div class="content"><ol><li>事物内部故障<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--例如，银行转账事务，这个事务把一笔金额从一个账户甲转给另一个账户乙。</span></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION</span><br><span class="line">读账户甲的余额BALANCE;</span><br><span class="line">BALANCE<span class="operator">=</span>BALANCE<span class="operator">-</span>AMOUNT; <span class="comment">/*AMOUNT 为转账金额*/</span></span><br><span class="line">IF(BALANCE <span class="operator">&lt;</span> <span class="number">0</span> ) <span class="keyword">THEN</span></span><br><span class="line">&#123;</span><br><span class="line">    打印‘金额不足，不能转账’；<span class="comment">/*事务内部可能造成事务被回滚的情况*/</span></span><br><span class="line">    <span class="keyword">ROLLBACK</span>; <span class="comment">/*撤销刚才的修改，恢复事务*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">&#123;</span><br><span class="line">    读账户乙的余额BALANCE1;</span><br><span class="line">    BALANCE1<span class="operator">=</span>BALANCE1<span class="operator">+</span>AMOUNT;</span><br><span class="line">    写回BALANCE1;</span><br><span class="line">    <span class="keyword">COMMIT</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>事务内部更多的故障是非预期的，是不能由应用程序处理的。</li><li>事物内部故障的常见原因：<ul><li>运算溢出</li><li>并发事务发生死锁而被选中撤销该事务</li><li>违反了某些完整性限制而被终止</li></ul></li><li>恢复操作：事务撤销（UNDO）</li></ol></li><li>系统故障<ol><li>称为软故障，是指造成系统停止运转的任何事件，使得系统要重新启动。整个系统的正常运行突然被破坏，所有正在运行的事务都非正常终止，不破坏数据库，内存中数据库缓冲区的信息全部丢失。发生系统故障时，一些尚未完成的事务的结果可能已送入物理数据库，造成数据库可能处于不正确状态。</li><li>系统故障的常见原因：<ul><li>特定类型的硬件错误（如CPU故障）</li><li>操作系统故障</li><li>数据库管理系统代码错误</li><li>系统断电</li></ul></li><li>恢复操作：系统重新启动时，恢复程序让所有非正常终止的事务回滚，强行撤消（UNDO）所有未完成事务，重作（REDO）所有已提交的事务</li></ol></li><li>介质故障<ol><li>称为硬故障，指外存故障。介质故障破坏数据库或部分数据库，并影响正在存取这部分数据的所有事务介质故障比前两类故障的可能性小得多，但破坏性大得多</li><li>介质故障的常见原因：<ul><li>磁盘损坏</li><li>磁头碰撞</li><li>瞬时强磁场干扰</li></ul></li></ol></li><li>计算机病毒（知道即可，不属于典型故障）</li></ol></div></details></li><li><p>建立冗余数据常用技术</p><details class="folding-tag" cyan><summary>answer P297</summary><div class="content"><ol><li>恢复操作的基本原理：冗余</li><li>建立冗余数据最常用的技术是数据转储和登记日志文件</li><li>数据转储的四种方法：<ul><li>动态海量转储</li><li>动态增量转储</li><li>静态海量转储</li><li>静态增量转储</li></ul></li></ol></div></details></li><li><p>登记日志文件</p><details class="folding-tag" cyan><summary>answer P298</summary><div class="content"><ol><li>日志文件定义：是用来记录事务对数据库的更新操作的文件</li></ol></div></details></li><li><p>恢复的策略</p><details class="folding-tag" cyan><summary>answer P300</summary><div class="content"><ol><li>事务故障的恢复：DBMS自动完成，不需要用户操作，UNDO操作。<ul><li>反向扫描文件日志，查找该事物的更新操作</li><li>对该事务的更新操作执行逆操作</li></ul></li><li>系统故障的恢复：DBMS自动完成，不需要用户操作，Undo故障发生时未完成的事务，Redo已完成的事务<ul><li>正向扫描日志文件</li><li>对撤销(UNDO)队列事务进行撤销(UNDO)处理</li><li>对重做(REDO)队列事务进行重做(REDO)处理</li></ul></li><li>介质故障的恢复：介质故障的恢复需要DBA介入<ul><li>装入最新的后备数据库副本,使数据库恢复到最近一次转储时的一致性状态。注意：对于动态转储的数据库副本，还须同时装入转储时刻的日志文件副本，利用恢复系统故障的方法（即REDO+UNDO），才能将数据库恢复到一致性状态</li><li>装入有关的日志文件副本，重做已完成的事务。</li></ul></li></ol></div></details></li><li><p>具有检查点的恢复技术</p><details class="folding-tag" cyan><summary>answer P303</summary><div class="content"><ol><li>问题指出<ul><li>搜索整个日志将耗费大量的时间</li><li>重做处理：重新执行，浪费了大量时间</li></ul></li><li>检查点技术<ol><li>暂时终止现有事务的执行</li><li>把主存中被修改的数据缓冲区强制写入磁盘</li><li>在日志中写入检查点记录，并把日志强制写入磁盘</li><li>重新开始执行事务</li></ol></li><li>检查点恢复步骤<ol><li>从重新开始文件中找到最后一个检查点记录</li><li>由该检查点得到检查点建立时刻正在执行的事务清单ACTIVE-LIST<ul><li>建立事务队列：UNDO-LIST和REDO-LIST</li><li>将ACTIVE-LIST暂时放入UNDO-LIST，REDO-LIST为空</li></ul></li><li>从检查点正向扫描事务<ul><li>新开始的事务放入UNDO-LIST</li><li>提交的事务放入REDO-LIST</li></ul></li><li>处理每个队列中的事务</li></ol></li></ol></div></details></li></ol></div><h2 id="并发控制与封锁">并发控制与封锁</h2><div class="tip warning"><p>可以通过阅读P311的图理解掌握丢失修改、不可重复读、读“脏”数据的相关概念</p></div><div class="note blue no-icon flat"><ol><li>并发操作与数据的不一致性<details class="folding-tag" cyan><summary>answer P310</summary><div class="content"><ol><li>丢失修改：两个事务T1和T2读入同一数据并修改，T2的提交结果破坏了T1提交的结果，导致T1的修改被丢失</li><li>不可重复读：事务T1读取数据后，事 务T2执行更新操作，使T1无法再现前一次读取结果。</li><li>读“脏”数据：事务T1修改某一数据，并将其写回磁盘。事务T2读取同一数据后，T1由于某种原因被撤销。这时T1已修改过的数据恢复原值，T2读到的数据就与数据库中的数据不一致</li></ol></div></details></li><li>封锁<details class="folding-tag" cyan><summary>answer P310</summary><div class="content"><ol><li>封锁就是事务T在对某个数据对象（例如表、记录等）操作之前，先向系统发出请求，对其加锁</li><li>加锁后事务T就对该数据对象有了一定的控制，在事务T释放它的锁之前，其它的事务不能更新此数据对象。</li><li>封锁是实现并发控制的一个非常重要的技术</li><li>一个事务对某个数据对象加锁后究竟拥有什么样的控制由封锁的类型决定。</li><li>基本封锁类型：排他锁（写锁，Exclusive Locks，简记为X锁）；共享锁（共享锁，Share Locks，简记为S锁）</li><li>排他锁：<ul><li>若事务T对数据对象A加上X锁，则只允许T读取和修改A，其它任何事务都不能再对A加任何类型的锁，直到T释放A上的锁。</li><li>保证其他事务在T释放A上的锁之前不能再读取和修改A</li></ul></li><li>共享锁：<ul><li>若事务T对数据对象A加上S锁，则事务T可以读A但不能修改A，其它事务只能再对A加S锁，而不能加X锁，直到T释放A上的S锁</li><li>保证其他事务可以读A，但在T释放A上的S锁之前不能对A做任何修改<br><img src="https://pic.imgdb.cn/item/62b71d870947543129c6780f.png" alt=""></li></ul></li></ol></div></details></li></ol></div><h2 id="经典习题">经典习题</h2><div class="tip warning"><p>主要选取不在罗列内容但可能考的习题</p></div><div class="note orange no-icon flat"><details class="folding-tag" cyan><summary>选择题</summary><div class="content"><p><img src="https://pic.imgdb.cn/item/62b8120e2f25919088effcd3.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8112a2f25919088eedab9.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b811412f25919088eefa70.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b811632f25919088ef248c.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b812602f25919088f0657c.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b812b02f25919088f0d680.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b812f92f25919088f12fda.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8137d2f25919088f1de24.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b813c22f25919088f2345d.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b815b32f25919088f4bc9c.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b816042f25919088f52738.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b816212f25919088f54c39.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b816912f25919088f5d351.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b816b02f25919088f5fb7c.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b816ee2f25919088f64bab.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8174c2f25919088f6c5d9.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8188a2f25919088f85ef6.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b818ec2f25919088f8ecd4.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8195a2f25919088f9a814.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b819772f25919088f9de1e.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b819a02f25919088fa2603.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b819ec2f25919088faa557.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81a762f25919088fb9569.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81b942f25919088fd9d56.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81c182f25919088fe6271.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81c832f25919088ff0602.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81ced2f25919088ffa32a.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81d0e2f25919088ffd2cd.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81d222f25919088ffed83.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81d502f259190880034a1.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81d6d2f25919088006a37.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81da62f2591908800c17a.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81dc42f2591908800efab.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b81e042f25919088014916.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b835872f259190881fe7ee.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b835ee2f25919088206728.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8363c2f2591908820cbcd.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b838a62f2591908823f1c0.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b839392f2591908824b634.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b839512f2591908824d9af.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b8397f2f25919088251923.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b839c62f2591908825799b.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83a8e2f25919088268276.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83aa02f25919088269c6e.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83ac52f2591908826c808.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83af42f25919088270381.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83b042f25919088271ce1.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83b3a2f25919088276795.png" alt=""><br><img src="https://pic.imgdb.cn/item/62b83c2b2f2591908828a918.png" alt=""></p></div></details></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="https://jezer.top">Jezer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://jezer.top/posts/e48b5902/">https://jezer.top/posts/e48b5902/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jezer.top" target="_blank">Jezer's Blogs</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/DB/">DB</a><a class="post-meta__tags" href="/tags/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/">期末复习</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imgdb.cn/item/62bbd5fd1d64b07066f568af.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://pic.imgdb.cn/item/61c56c552ab3f51d91fd6986.jpg" target="_blank"><img class="post-qr-code-img" src="https://pic.imgdb.cn/item/61c56c552ab3f51d91fd6986.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://pic.imgdb.cn/item/61c56b492ab3f51d91fcebf2.jpg" target="_blank"><img class="post-qr-code-img" src="https://pic.imgdb.cn/item/61c56b492ab3f51d91fcebf2.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/730ce1a8/"><img class="prev-cover" src="https://pic.imgdb.cn/item/62b993581d64b07066358050.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">butterfly魔改记录</div></div></a></div><div class="next-post pull-right"><a href="/posts/890cc775/"><img class="next-cover" src="https://pic.imgdb.cn/item/61c5448e2ab3f51d91ed5e30.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">docker镜像</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="cols"><div class="col"><div class="container"><div class="front avatarPanel"><div class="inner"><div class="player-title">Attributes</div><div class="player-avatar"><img src="https://pic.imgdb.cn/item/62a09fb109475431296de403.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div></div></div><div class="back attributesPanel"><div class="inner"><div class="player-lv">LV.3</div><div class="player-name">Jezer</div><div class="attributes-value"><div class="attributes-value-item"><a href="/archives/"><div class="attributes">文章</div><div class="value-bar"><div class="value-bar-fill" style="width:25%"><div class="value-bar-fill-in" style="background:rgba(89,230,54,.6)"></div></div></div><span>25/100</span></a></div><div class="attributes-value-item"><a href="/tags/"><div class="attributes">标签</div><div class="value-bar"><div class="value-bar-fill" style="width:20%"><div class="value-bar-fill-in" style="background:rgba(224,20,20,.6)"></div></div></div><span>20/100</span></a></div><div class="attributes-value-item"><a href="/categories/"><div class="attributes">分类</div><div class="value-bar"><div class="value-bar-fill" style="width:6%"><div class="value-bar-fill-in" style="background:rgba(30,97,226,.6)"></div></div></div><span>6/100</span></a></div></div></div></div></div></div><div class="col"><div class="container"><div class="front descriptionPanel"><div class="inner"><div class="player_description">秋来，等叶满地，织染江山<br>夜半，摘星为盏，斟满年轮<br>茶浓，抚水为琴，弹拨记忆<br>半山听雨，音似弦;半山隐庐，心如禅<br></div><div class="play-bottom"></div></div></div><div class="back buttonPanel"><div class="inner"><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Jezer05"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Jezer05" target="_blank" title="Github"><svg class="icon faa-spin" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://gitee.com/Jezer05" target="_blank" title="Gitee"><svg class="icon faa-flash" aria-hidden="true"><use xlink:href="#icon-gitee"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://www.cnblogs.com/Jezer" target="_blank" title="Cnblogs"><svg class="icon faa-shake" aria-hidden="true"><use xlink:href="#icon-cnblogs1"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/451165086?spm_id_from=333.1007.0.0" target="_blank" title="Bilibili"><svg class="icon faa-horizontal" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a></div><div class="play-bottom"></div></div></div></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%80%83%E8%AF%95%E9%A2%98%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">考试题型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%AA%E8%AE%BA"><span class="toc-number">2.</span> <span class="toc-text">绪论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.</span> <span class="toc-text">关系数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E4%B8%8ET-SQL"><span class="toc-number">4.</span> <span class="toc-text">SQL与T-SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">5.</span> <span class="toc-text">数据库安全性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">数据库完整性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA"><span class="toc-number">7.</span> <span class="toc-text">关系数据理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0"><span class="toc-number">8.</span> <span class="toc-text">数据库设计概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF"><span class="toc-number">9.</span> <span class="toc-text">数据库恢复技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%B0%81%E9%94%81"><span class="toc-number">10.</span> <span class="toc-text">并发控制与封锁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E4%B9%A0%E9%A2%98"><span class="toc-number">11.</span> <span class="toc-text">经典习题</span></a></li></ol></div></div><div class="card-widget card-recommend-post"><div class="item-headline"><i class="fas fa-dharmachakra"></i><span>相关推荐</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/787cbc62/" title="数据库概述"><img src="https://pic.imgdb.cn/item/61c67d5e2ab3f51d917135f2.jpg" alt="数据库概述"></a><div class="content"><a class="title" href="/posts/787cbc62/" title="数据库概述">数据库概述</a><time datetime="2022-01-02" title="发表于 2022-01-02">2022-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3fb56f9d/" title="离散数学"><img src="https://pic.imgdb.cn/item/61cc7a302ab3f51d9119b16a.png" alt="离散数学"></a><div class="content"><a class="title" href="/posts/3fb56f9d/" title="离散数学">离散数学</a><time datetime="2022-01-02" title="发表于 2022-01-02">2022-01-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://pic.imgdb.cn/item/62bbd5fd1d64b07066f568af.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Jezer</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="to_comment" type="button" title="直达评论" onclick="FixedCommentBtn()"><i class="fas fa-comments"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>function loadWaline(){function e(){Waline.init(Object.assign({el:"#waline-wrap",serverURL:"https://waline-jezer05.vercel.app",pageview:!1,dark:'html[data-theme="dark"]',path:window.location.pathname,comment:!0,imageUploader:function(e){let n=new FormData,t=new Headers;return n.append("file",e),t.append("Authorization","Bearer 210|AzZfDacNm4WrGIQTdV8gnjMT3hMoz4Fa2rYomlZc"),t.append("Accept","application/json"),fetch("https://7bu.top/api/v1/upload",{method:"POST",headers:t,body:n}).then(e=>e.json()).then(e=>e.data.links.url)}},null))}"function"==typeof Waline?e():(!function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css",document.head.appendChild(e)}(),getScript("https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js").then(e))}{function loadOtherComment(){loadWaline()}setTimeout(loadWaline,0)}</script></div><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer data-pjax src="/js/custom/wow_init.js"></script><script async data-pjax src="/js/custom/randombg.js"></script><script async src="/js/custom/diytitle.js"></script><script data-pjax defer src="/js/custom/fixed_comment.js"></script><script async src="//at.alicdn.com/t/c/font_3061941_pqavcqu4arp.js"></script><div class="aplayer no-destroy" data-id="8289648289" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="list" data-preload="none" data-autoplay="false" muted></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="//code.tidio.co/gs8taylk1pdyas7mfhyl5jcwv2jokglr.js" async></script><script>function onTidioChatApiReady(){window.tidioChatApi.hide(),window.tidioChatApi.on("close",(function(){window.tidioChatApi.hide()}))}window.tidioChatApi?window.tidioChatApi.on("ready",onTidioChatApiReady):document.addEventListener("tidioChat-ready",onTidioChatApiReady);var chatBtnFn=()=>{document.getElementById("chat_btn").addEventListener("click",(function(){window.tidioChatApi.show(),window.tidioChatApi.open()}))};chatBtnFn()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>function butterfly_clock_injector_config(){var l=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载butterfly_clock"),l.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_clock_injector_config()</script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js"></script><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/40a36fe6/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://pic.imgdb.cn/item/628b8367094754312911cd6e.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-02-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/40a36fe6/&quot;);" href="javascript:void(0);" alt="">SSM项目开发流程</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/40a36fe6/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/6c92115f/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://pic.imgdb.cn/item/61c67a922ab3f51d916fe871.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/6c92115f/&quot;);" href="javascript:void(0);" alt="">Spring</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/6c92115f/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/da3e1361/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://pic.imgdb.cn/item/61c67f012ab3f51d9172068e.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/da3e1361/&quot;);" href="javascript:void(0);" alt="">Mybatis</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/da3e1361/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/99720b1c/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://pic.imgdb.cn/item/61c67f2a2ab3f51d917218d2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/99720b1c/&quot;);" href="javascript:void(0);" alt="">JavaWeb</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/99720b1c/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/787cbc62/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://pic.imgdb.cn/item/61c67d5e2ab3f51d917135f2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/787cbc62/&quot;);" href="javascript:void(0);" alt="">数据库概述</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/787cbc62/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","1s"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","2")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>function gitcalendar_injector_config(){document.getElementById("recent-posts").insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>'),console.log("已挂载gitcalendar")}document.getElementById("recent-posts")&&"/"===location.pathname&&(gitcalendar_injector_config(),GitCalendarInit("https://python-github-calendar-api.vercel.app/api?Jezer05",["#e4dfd7","#f9f4dc","#f7e8aa","#f7e8aa","#f8df72","#fcd217","#fcc515","#f28e16","#fb8b05","#d85916","#f43e06"],"Jezer05"))</script></body></html>